%new-style
%strict-args
%require-types
%enable-all-warnings

class AwsIotDemo inherits BBM_AwsSnsServiceBase {
    private AbstractServiceHttpHandler getHandlerImpl() {
        return new AwsIotDemoRestHandler();
    }
}

class AwsIotDemoRestHandler inherits AwsIotRestHandlerBase, private BBM_CreateOrder {
    private hash<HttpHandlerResponseInfo> processNotificationImpl(hash<auto> cx, *hash<auto> ah) {
        logInfo("body: %N", ah);
        int wfiid = createWorkflowOrder(ah);
        return RestHandler::makeResponse(200, {"workflow_instanceid": wfiid});
    }
} # AwsIotDemoRestHandler
