# -*- mode: qore; indent-tabs-mode: nil -*-
# test workflow definition
#
# Qorus Integration Engine

%new-style

our string format_version = "2.6";

our hash<auto> groups = {
    "demo": {"desc": "demo interfaces"},
    "demo-erp": {"desc": "ERP demo interfaces"},
};

our list<auto> steps = (
    {
        "name": "erp_rma_doa_elf_validate_in:1.0",
        "desc": "validates RMA / DOA / ELF information and compares it to the original request",
        "funcname": "demo:1.0",
        "valname": "demo_val:1.0",
    },
    (
        {
            "name": "erp_rma_doa_elf_import_in:1.0",
            "desc": "imports the validated RMA / DOA / ELF data",
            "funcname": "demo:1.0",
            "valname": "demo_val:1.0",
        },
        {
            "name": "erp_rma_doa_elf_in_error_out:1.0",
            "desc": "returns errors to the external logistics provider, if any are found",
            "funcname": "demo:1.0",
            "valname": "demo_val:1.0",
        },
    ),
    {
        "name": "erp_rma_doa_elf_finalize_in:1.0",
        "desc": "sends a notification to the internal logistics group about RMA / DOA / ELF processing (success or error details, if any)",
        "funcname": "demo:1.0",
        "valname": "demo_val:1.0",
    },
);

our hash<auto> workflows."ERP-BATCH-RL-RMA-DOA-ELF-IN"."1.0" = {
    "desc": "Demo ERP Reverse Logistics RMA / DOA / ELF import workflow; imports RMA / DOA / ELF info as received from the relevant internal systems",
    "author": "Qore Technologies, s.r.o.",
    "steps": steps,
    "groups": ("demo", "demo-erp"),
    "sla_threshold": 1,
    "autostart": 1,
    "remote": False,
};
