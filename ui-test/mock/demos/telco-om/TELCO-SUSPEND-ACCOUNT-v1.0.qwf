# -*- mode: qore; indent-tabs-mode: nil -*-
# test workflow definition
#
# Qorus Integration Engine

%new-style

our string format_version = "2.6";

our hash<auto> groups = {
    "demo": {"desc": "demo interfaces"},
    "demo-telco-om": {"desc": "Telco OM demo interfaces"},
};

our list<auto> steps = (
    {
        "name": "telco_suspend_billing_account:1.0",
        "desc": "suspend the billing account",
        "funcname": "demo:1.0",
        "valname": "demo_val:1.0",
    },
    (
        {
            "name": "telco_suspend_technical_services:1.0",
            "desc": "suspend services on the network and supporting systems (number management, MNP etc) according to the product/tariff/options ordered",
            "funcname": "demo_telco_suspend_services_subworkflow:1.0",
            "arrayname": "demo_telco_array_1:1.0",
            "subworkflow": True,
        },
        {
            "name": "telco_suspend_counter_fraud_account:1.0",
            "desc": "suspend the account info in the counter-fraud system",
            "funcname": "demo:1.0",
            "valname": "demo_val:1.0",
        },
    ),
    {
        "name": "telco_update_crm_suspend_account:1.0",
        "desc": "update the CRM system on the status of the account suspension action",
        "funcname": "demo:1.0",
        "valname": "demo_val:1.0",
    },
);

our hash<auto> workflows."TELCO-SUSPEND-ACCOUNT"."1.0" = {
    "desc": "demo telco account suspension workflow",
    "author": "Qore Technologies, s.r.o.",
    "steps": steps,
    "groups": ("demo", "demo-telco-om"),
    "sla_threshold": 55,
    "autostart": 1,
    "remote": False,
};
